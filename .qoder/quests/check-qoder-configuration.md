# Qoderç¯å¢ƒé…ç½®æ£€æŸ¥ä¸è®¾ç½® - UMI + Egg.jså…¨æ ˆå¼€å‘

## 1. æ¦‚è¿°

æœ¬æ–‡æ¡£æ—¨åœ¨æ£€æŸ¥å’Œé…ç½®Qoderå¼€å‘ç¯å¢ƒï¼Œç¡®ä¿å…¶ç¬¦åˆUMI + Egg.jså…¨æ ˆå¼€å‘çš„è¦æ±‚ã€‚æˆ‘ä»¬å°†æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œï¼š

1. æ£€æŸ¥Qoderçš„è®¾ç½®ã€é…ç½®å’Œæ’ä»¶æ˜¯å¦ç¬¦åˆUMI + Egg.jså…¨æ ˆå¼€å‘ç¯å¢ƒè¦æ±‚
2. æ ¹æ®æ£€æµ‹ç»“æœè®¾ç½®å¥½å¼€å‘å·¥å…·
3. ç¡®ä¿æ‰€æœ‰å¼€å‘éƒ½æŒ‰ç…§UMIå’ŒEgg.jsçš„ä»£ç è§„èŒƒã€æ¥å£è§„èŒƒå’Œå˜é‡è§„èŒƒè¿›è¡Œ
4. æ„å»ºUMIå‰ç«¯å¹¶ä¸Egg.jsåç«¯ååŒå·¥ä½œï¼Œç¡®ä¿å¯ä»¥æ­£å¸¸è¿è¡Œå…¶å¤šåŠŸèƒ½

## 2. Qoderç¯å¢ƒé…ç½®ç›®æ ‡

æ ¹æ®é¡¹ç›®çŸ¥è¯†åº“ä¸­çš„ä¿¡æ¯ï¼ŒQoderåœ¨UGé¡¹ç›®ä¸­çš„é…ç½®éœ€è¦æ»¡è¶³ä»¥ä¸‹ç›®æ ‡ï¼š

1. **å…¼å®¹æ€§è¦æ±‚**ï¼šç¡®ä¿Qoderç¯å¢ƒä¸UMI + Egg.jsæŠ€æœ¯æ ˆå®Œå…¨å…¼å®¹
2. **ä¸€è‡´æ€§è¦æ±‚**ï¼šç¡®ä¿å›¢é˜Ÿæˆå‘˜çš„å¼€å‘ç¯å¢ƒé…ç½®ä¸€è‡´
3. **è‡ªåŠ¨åŒ–è¦æ±‚**ï¼šé€šè¿‡è„šæœ¬åŒ–æ–¹å¼å®ç°ç¯å¢ƒé…ç½®çš„è‡ªåŠ¨åŒ–
4. **å¯ç»´æŠ¤æ€§è¦æ±‚**ï¼šæä¾›æ¸…æ™°çš„é…ç½®æ–‡æ¡£å’Œæ£€æŸ¥æœºåˆ¶

## 3. UMI + Egg.jsæŠ€æœ¯ç»„åˆæ¦‚è¿°

UGç³»ç»Ÿé‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œä½¿ç”¨ç°ä»£åŒ–çš„æŠ€æœ¯æ ˆç»„åˆï¼š

### å‰ç«¯æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: UMI 4.x + React 18
- **UIåº“**: Ant Design 5.x
- **çŠ¶æ€ç®¡ç†**: UMI Model
- **ç½‘ç»œè¯·æ±‚**: UMI Request/axios
- **æ„å»ºå·¥å…·**: Webpack 5
- **è¯­è¨€**: TypeScript 5.x

### åç«¯æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: Egg.js 3.x (åŸºäºKoa)
- **æ•°æ®åº“**: MySQL 8.0
- **ORM**: Sequelize 6.x
- **è®¤è¯**: JWT (jsonwebtoken)
- **è¯­è¨€**: TypeScript/JavaScript

## 4. UMI + Egg.jså¼€å‘ç¯å¢ƒè¦æ±‚

### 4.1 æŠ€æœ¯æ ˆè¦æ±‚

æ ¹æ®é¡¹ç›®çŸ¥è¯†åº“ä¿¡æ¯ï¼ŒUMI + Egg.jsé¡¹ç›®çš„æŠ€æœ¯æ ˆè¦æ±‚å¦‚ä¸‹ï¼š

- **Node.js**: 20.19.0
- **åŒ…ç®¡ç†å™¨**: pnpm 8.15.8
- **TypeScript**: 5.9.2ç‰ˆæœ¬
- **å‰ç«¯æ¡†æ¶**: UMI 4.3+
- **åç«¯æ¡†æ¶**: Egg.js 3.x
- **React**: 18.x
- **UIç»„ä»¶åº“**: Ant Design 5.x
- **çŠ¶æ€ç®¡ç†**: UMI Model
- **ç½‘ç»œè¯·æ±‚**: UMI Requestæˆ–axios
- **æ•°æ®åº“**: MySQL 8.0+
- **ORM**: Sequelize 6.x
- **ä»£ç è´¨é‡å·¥å…·**: ESLint 8.x, Prettier 3.x

### 4.2 Qoderç‰¹å®šè¦æ±‚

æ ¹æ®é¡¹ç›®çŸ¥è¯†åº“ä¸­çš„Qoderé…ç½®ä¿¡æ¯ï¼Œè¿˜éœ€è¦æ»¡è¶³ä»¥ä¸‹ç‰¹å®šè¦æ±‚ï¼š

1. **VS Codeé…ç½®**ï¼š
   - é…ç½®è‡ªåŠ¨ä¿å­˜ï¼š`"files.autoSave": "onFocusChange"`
   - é…ç½®ä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–ï¼š`"editor.formatOnSave": true`
   - é…ç½®ä¿å­˜æ—¶ESLintè‡ªåŠ¨ä¿®å¤ï¼š`"editor.codeActionsOnSave": { "source.fixAll.eslint": "explicit" }`

2. **è‡ªåŠ¨åŒ–è„šæœ¬**ï¼š
   - æä¾›è‡ªåŠ¨æ ¼å¼åŒ–å’Œæ£€æŸ¥ä»£ç è„šæœ¬
   - æä¾›è‡ªåŠ¨ç±»å‹æ£€æŸ¥è„šæœ¬
   - æä¾›è‡ªåŠ¨æ„å»ºé¡¹ç›®è„šæœ¬
   - æä¾›è‡ªåŠ¨å¯åŠ¨å¼€å‘æœåŠ¡å™¨è„šæœ¬

3. **å¼€å‘è§„èŒƒ**ï¼š
   - éµå¾ªUMI 4.xè§„èŒƒè¦æ±‚
   - ä½¿ç”¨çº¦å®šå¼è·¯ç”±
   - éµå¾ªé¡¹ç›®ç›®å½•ç»“æ„è§„èŒƒ

### 4.3 å¼€å‘å·¥å…·è¦æ±‚

- **ç¼–è¾‘å™¨**: VS Codeï¼ˆæ¨èï¼‰
- **å¿…è¦æ’ä»¶**: 
  - TypeScriptå¼€å‘æ”¯æŒ
  - Reactä»£ç ç‰‡æ®µ
  - ä»£ç è´¨é‡å·¥å…·(Prettier/ESLint/æ‹¼å†™æ£€æŸ¥)
  - Gitå·¥å…·(Gitå›¾å½¢åŒ–/GitLens/GitHub Pull Request)
  - ç•Œé¢å¢å¼º(å›¾æ ‡ä¸»é¢˜)
  - å¼€å‘æ•ˆç‡å·¥å…·(IntelliCode/è‡ªåŠ¨é‡å‘½åæ ‡ç­¾/è·¯å¾„æ™ºèƒ½æç¤º/Tailwind CSS)
  - æ•°æ®åº“å·¥å…·(SQLToolsåŠMySQLé©±åŠ¨)
  - APIæµ‹è¯•å·¥å…·(REST Client)
  - æ–‡æ¡£æ”¯æŒ(æ›´å¥½çš„æ³¨é‡Š/Markdownå·¥å…·)
  - UMIå¼€å‘æ‰€éœ€çš„JavaScriptè°ƒè¯•å·¥å…·

## 5. Qoderç¯å¢ƒé…ç½®æ£€æŸ¥

### 5.1 å½“å‰ç¯å¢ƒçŠ¶æ€æ£€æŸ¥

ç”±äºå½“å‰å·¥ä½œç›®å½•ä¸ºç©ºï¼Œæˆ‘ä»¬éœ€è¦ä»å¤´å¼€å§‹é…ç½®ç¯å¢ƒã€‚ä»¥ä¸‹æ˜¯éœ€è¦æ£€æŸ¥å’Œé…ç½®çš„é¡¹ç›®ï¼š

1. **Node.jsç¯å¢ƒæ£€æŸ¥**
   - æ£€æŸ¥Node.jsç‰ˆæœ¬æ˜¯å¦ä¸º20.19.0
   - æ£€æŸ¥npmç‰ˆæœ¬
   - æ£€æŸ¥pnpmæ˜¯å¦å·²å®‰è£…åŠç‰ˆæœ¬ï¼ˆæ¨è8.15.8ï¼‰

2. **VS Codeé…ç½®æ£€æŸ¥**
   - æ£€æŸ¥VS Codeæ˜¯å¦å·²å®‰è£…
   - æ£€æŸ¥å¿…è¦æ’ä»¶æ˜¯å¦å·²å®‰è£…
   - æ£€æŸ¥VS Codeè®¾ç½®æ˜¯å¦ç¬¦åˆé¡¹ç›®è¦æ±‚

3. **Qoderç‰¹å®šé…ç½®æ£€æŸ¥**
   - æ£€æŸ¥æ˜¯å¦é…ç½®äº†è‡ªåŠ¨ä¿å­˜
   - æ£€æŸ¥æ˜¯å¦é…ç½®äº†ä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–
   - æ£€æŸ¥æ˜¯å¦é…ç½®äº†ä¿å­˜æ—¶ESLintè‡ªåŠ¨ä¿®å¤

4. **é¡¹ç›®ç»“æ„åˆå§‹åŒ–**
   - åˆå§‹åŒ–å‰åç«¯é¡¹ç›®ç»“æ„
   - é…ç½®UMIå‰ç«¯é¡¹ç›®
   - é…ç½®Egg.jsåç«¯é¡¹ç›®
   - è®¾ç½®TypeScripté…ç½®
   - é…ç½®ESLintå’ŒPrettier

### 5.2 ç¯å¢ƒé…ç½®é—®é¢˜è¯†åˆ«

æ ¹æ®é¡¹ç›®çŸ¥è¯†åº“ä¿¡æ¯ï¼Œä»¥ä¸‹æ˜¯å¯èƒ½é‡åˆ°çš„é…ç½®é—®é¢˜ï¼š

1. **åŒ…ç®¡ç†å™¨é—®é¢˜**:
   - é¡¹ç›®è¦æ±‚ä½¿ç”¨pnpmè€Œénpmæˆ–yarn
   - éœ€è¦ç¡®ä¿pnpmç‰ˆæœ¬ä¸º8.15.8

2. **TypeScripté…ç½®é—®é¢˜**:
   - éœ€è¦æ­£ç¡®é…ç½®tsconfig.jsonæ–‡ä»¶
   - éœ€è¦è®¾ç½®ignoreDeprecationsä»¥é¿å…å¼ƒç”¨è­¦å‘Š

3. **UMIé…ç½®é—®é¢˜**:
   - éœ€è¦æ­£ç¡®é…ç½®.umirc.tsæ–‡ä»¶
   - éœ€è¦ç¦ç”¨MFSUä»¥é¿å…ç¼–è¯‘é—®é¢˜
   - éœ€è¦æ­£ç¡®é…ç½®ä»£ç†è®¾ç½®

4. **Egg.jsé…ç½®é—®é¢˜**:
   - éœ€è¦æ­£ç¡®é…ç½®config.default.jsæ–‡ä»¶
   - éœ€è¦é…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯
   - éœ€è¦é…ç½®CORSè·¨åŸŸè®¾ç½®

5. **ä»£ç è´¨é‡å·¥å…·é…ç½®é—®é¢˜**:
   - éœ€è¦ä½¿ç”¨ESLint 8.xçš„æ‰å¹³åŒ–é…ç½®æ ¼å¼
   - éœ€è¦æ­£ç¡®é…ç½®Prettierè§„åˆ™

6. **Qoderç¯å¢ƒé…ç½®é—®é¢˜**:
   - VS Codeè®¾ç½®ä¸ç¬¦åˆé¡¹ç›®è¦æ±‚
   - ç¼ºå°‘è‡ªåŠ¨åŒ–å¼€å‘è„šæœ¬
   - æœªéµå¾ªUMI 4.xè§„èŒƒè¦æ±‚

## 6. Qoderç¯å¢ƒé…ç½®è®¾ç½®

### 6.1 Node.jså’ŒåŒ…ç®¡ç†å™¨é…ç½®

```bash
# å®‰è£…å’Œä½¿ç”¨æŒ‡å®šç‰ˆæœ¬çš„Node.js
nvm install 20.19.0
nvm use 20.19.0

# å¯ç”¨Corepackå¹¶å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„pnpm
corepack enable
corepack prepare pnpm@8.15.8 --activate
```

### 6.2 VS Codeé…ç½®

#### 6.2.1 å¿…è¦æ’ä»¶å®‰è£…

åœ¨VS Codeä¸­å®‰è£…ä»¥ä¸‹æ’ä»¶ï¼š
- TypeScript Importer
- ES7+ React/Redux/React-Native snippets
- Prettier - Code formatter
- ESLint
- GitLens â€” Git supercharged
- Git Graph
- Path Intellisense
- Auto Rename Tag
- Bracket Pair Colorizer
- indent-rainbow
- REST Client
- Better Comments
- Markdown All in One
- JavaScript Debugger
- IntelliCode

#### 6.2.2 VS Codeè®¾ç½®é…ç½®

åˆ›å»º `.vscode/settings.json` æ–‡ä»¶ï¼š

```json
{
  "files.autoSave": "onFocusChange",
  "editor.formatOnSave": true,
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": "explicit"
  },
  "typescript.preferences.includePackageJsonAutoImports": "on",
  "typescript.suggest.autoImports": true,
  "javascript.suggest.autoImports": true,
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "terminal.integrated.defaultProfile.windows": "Command Prompt",
  "terminal.integrated.profiles.windows": {
    "Command Prompt": {
      "path": [
        "${env:windir}\\Sysnative\\cmd.exe",
        "${env:windir}\\System32\\cmd.exe"
      ],
      "icon": "terminal-cmd"
    }
  }
}
```

> **æ³¨æ„äº‹é¡¹**ï¼šæ ¹æ®ç”¨æˆ·çš„Windowså¼€å‘ç¯å¢ƒåå¥½ï¼Œå»ºè®®åœ¨Windowsç¯å¢ƒä¸‹ä¼˜å…ˆä½¿ç”¨CMDç»ˆç«¯æ‰§è¡Œå‘½ä»¤ï¼Œé¿å…ä½¿ç”¨PowerShellï¼Œä»¥é˜²æ­¢å‘½ä»¤åˆ†éš”ç¬¦å’Œè·¯å¾„é—®é¢˜å¯¼è‡´çš„é”™è¯¯ã€‚æ‰€æœ‰ç»ˆç«¯å‘½ä»¤åº”è¯¥é’ˆå¯¹ç‰¹å®šç»ˆç«¯ç¨‹åºè¿›è¡Œéš”ç¦»ï¼Œä¸è¦äº¤å‰ä½¿ç”¨ã€‚

### 6.2.3 Qoderè‡ªåŠ¨åŒ–è„šæœ¬é…ç½®

æ ¹æ®é¡¹ç›®è¦æ±‚ï¼Œåˆ›å»ºä»¥ä¸‹è‡ªåŠ¨åŒ–å¼€å‘è„šæœ¬ï¼š

1. **auto-format-and-lint.bat** - è‡ªåŠ¨æ ¼å¼åŒ–å’Œæ£€æŸ¥ä»£ç è„šæœ¬
2. **auto-type-check.bat** - è‡ªåŠ¨ç±»å‹æ£€æŸ¥è„šæœ¬
3. **auto-build.bat** - è‡ªåŠ¨æ„å»ºé¡¹ç›®è„šæœ¬
4. **auto-dev-server.bat** - è‡ªåŠ¨å¯åŠ¨å¼€å‘æœåŠ¡å™¨è„šæœ¬

è¿™äº›è„šæœ¬åº”è¯¥æ”¾åœ¨é¡¹ç›®çš„`scripts/`ç›®å½•ä¸‹ï¼Œä»¥ä¾¿å›¢é˜Ÿæˆå‘˜å¯ä»¥è½»æ¾ä½¿ç”¨ã€‚

#### 6.2.3.1 VS Codeä»»åŠ¡é…ç½®

ä¸ºäº†è¿›ä¸€æ­¥æå‡å¼€å‘æ•ˆç‡ï¼Œå¯ä»¥åœ¨VS Codeä¸­é…ç½®ä»»åŠ¡ï¼Œé€šè¿‡å¿«æ·é”®ç›´æ¥è¿è¡Œè‡ªåŠ¨åŒ–è„šæœ¬ã€‚åˆ›å»º`.vscode/tasks.json`æ–‡ä»¶ï¼š

```json
{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "è‡ªåŠ¨æ ¼å¼åŒ–å’Œæ£€æŸ¥",
      "type": "shell",
      "command": "${workspaceFolder}/scripts/auto-format-and-lint.bat",
      "group": "build"
    },
    {
      "label": "è‡ªåŠ¨ç±»å‹æ£€æŸ¥",
      "type": "shell",
      "command": "${workspaceFolder}/scripts/auto-type-check.bat",
      "group": "build"
    },
    {
      "label": "è‡ªåŠ¨æ„å»ºé¡¹ç›®",
      "type": "shell",
      "command": "${workspaceFolder}/scripts/auto-build.bat",
      "group": "build"
    },
    {
      "label": "å¯åŠ¨å¼€å‘æœåŠ¡å™¨",
      "type": "shell",
      "command": "${workspaceFolder}/scripts/auto-dev-server.bat",
      "group": "build"
    },
    {
      "label": "ä¿®å¤ç¼–è¾‘å™¨çŠ¶æ€ä¸€è‡´æ€§",
      "type": "shell",
      "command": "${workspaceFolder}/scripts/fix-editor-consistency-simple.bat",
      "group": "build"
    }
  ]
}
```

é…ç½®å®Œæˆåï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è¿è¡Œä»»åŠ¡ï¼š
1. æŒ‰ä¸‹ `Ctrl+Shift+P` æ‰“å¼€å‘½ä»¤é¢æ¿
2. è¾“å…¥ `Tasks: Run Task` å¹¶é€‰æ‹©
3. åœ¨ä»»åŠ¡åˆ—è¡¨ä¸­é€‰æ‹©éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡
4. ç­‰å¾…ä»»åŠ¡æ‰§è¡Œå®Œæˆ

### 6.3 é¡¹ç›®ç»“æ„åˆå§‹åŒ–

#### 6.3.1 åˆ›å»ºå‰åç«¯é¡¹ç›®ç»“æ„

```
ug-project/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ controller/
â”‚   â”‚   â”œâ”€â”€ service/
â”‚   â”‚   â”œâ”€â”€ model/
â”‚   â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â””â”€â”€ router.js
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ config.default.js
â”‚   â”‚   â”œâ”€â”€ plugin.js
â”‚   â”‚   â””â”€â”€ config.local.js
â”‚   â”œâ”€â”€ database/
â”‚   â”‚   â”œâ”€â”€ migrations/
â”‚   â”‚   â””â”€â”€ seeders/
â”‚   â”œâ”€â”€ app.js
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â””â”€â”€ typings.d.ts
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ styles/
â”‚   â”‚   â””â”€â”€ assets/
â”‚   â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ .umirc.ts
â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â”œâ”€â”€ eslint.config.js
â”‚   â””â”€â”€ .prettierrc.json
â”œâ”€â”€ scripts/
â”œâ”€â”€ tools/
â”œâ”€â”€ monitoring/
â”œâ”€â”€ .vscode/
â”‚   â””â”€â”€ settings.json
â””â”€â”€ package.json
```

#### 6.3.2 åˆå§‹åŒ–å‰ç«¯package.json

```json
{
  "name": "ug-frontend",
  "version": "1.0.0",
  "description": "UGç®¡ç†ç³»ç»Ÿå‰ç«¯",
  "engines": {
    "node": "20.19.0",
    "pnpm": "8.15.8"
  },
  "packageManager": "pnpm@8.15.8",
  "scripts": {
    "dev": "umi dev",
    "build": "umi build",
    "lint": "eslint . --ext .ts,.tsx,.js,.jsx",
    "lint:fix": "eslint . --ext .ts,.tsx,.js,.jsx --fix",
    "format": "prettier --write \"src/**/*.{ts,tsx,js,jsx,json}\""
  },
  "dependencies": {
    "@umijs/max": "^4.3.0",
    "antd": "^5.21.0",
    "@ant-design/pro-components": "^2.7.0",
    "@ant-design/icons": "^5.4.0",
    "ahooks": "^3.8.0",
    "dayjs": "^1.11.10",
    "lodash-es": "^4.17.21",
    "zustand": "^4.5.0",
    "@antv/g2plot": "^2.4.32"
  },
  "devDependencies": {
    "typescript": "^5.9.2",
    "@types/lodash-es": "^4.17.12",
    "@types/react": "^18.2.0",
    "@types/react-dom": "^18.2.0",
    "eslint": "^8.57.0",
    "prettier": "^3.3.0",
    "@testing-library/react": "^14.3.0",
    "@testing-library/jest-dom": "^6.4.0",
    "jest": "^29.7.0"
  }
}
```

#### 6.3.3 åˆå§‹åŒ–åç«¯package.json

```json
{
  "name": "ug-backend",
  "version": "1.0.0",
  "description": "UGç®¡ç†ç³»ç»Ÿåç«¯",
  "engines": {
    "node": "20.19.0",
    "pnpm": "8.15.8"
  },
  "packageManager": "pnpm@8.15.8",
  "scripts": {
    "dev": "egg-bin dev",
    "debug": "egg-bin debug",
    "start": "egg-scripts start --daemon --title=ug-backend",
    "stop": "egg-scripts stop --title=ug-backend",
    "clean": "ets clean",
    "autod": "autod",
    "lint": "eslint . --ext .ts,.js",
    "lint:fix": "eslint . --ext .ts,.js --fix",
    "cov": "egg-bin cov",
    "ci": "npm run lint && npm run cov",
    "migrate:up": "egg-sequelize migration:up",
    "migrate:down": "egg-sequelize migration:down",
    "db:seed": "egg-sequelize db:seed:all"
  },
  "dependencies": {
    "egg": "^3.31.0",
    "egg-sequelize": "^5.0.0",
    "egg-jwt": "^3.1.0",
    "egg-cors": "^3.0.1",
    "egg-validate": "^3.0.2",
    "mysql2": "^3.9.7",
    "bcryptjs": "^2.4.3",
    "lodash": "^4.17.21",
    "moment": "^2.30.1"
  },
  "devDependencies": {
    "egg-bin": "^6.10.0",
    "egg-scripts": "^3.0.1",
    "egg-sequelize-cli": "^5.0.1",
    "egg-ts-helper": "^2.1.0",
    "typescript": "^5.9.2",
    "@types/node": "^20.12.7",
    "@types/bcryptjs": "^2.4.6",
    "@types/lodash": "^4.17.0",
    "eslint": "^8.57.0",
    "prettier": "^3.3.0",
    "@typescript-eslint/eslint-plugin": "^7.7.0",
    "@typescript-eslint/parser": "^7.7.0",
    "autod": "^3.1.1"
  }
}

### 4.3.3 UMI 4.xè§„èŒƒé…ç½®

æ ¹æ®é¡¹ç›®çŸ¥è¯†åº“ä¸­çš„UMI 4.xè§„èŒƒè¦æ±‚ï¼Œéœ€è¦ç¡®ä¿ä»¥ä¸‹é…ç½®ï¼š

1. **è·¯ç”±é…ç½®**ï¼šä½¿ç”¨çº¦å®šå¼è·¯ç”±
2. **useModelç”¨æ³•**ï¼šç¬¦åˆæ–°è§„èŒƒ
3. **ç›®å½•ç»“æ„**ï¼šéµå¾ªæ ‡å‡†ç›®å½•ç»“æ„è§„èŒƒï¼ˆsrc/componentsã€src/pagesã€src/servicesã€src/utilsã€src/modelsã€src/stylesç­‰ï¼‰
4. **JSXå¤„ç†**ï¼šç¡®ä¿tsconfig.jsonæ­£ç¡®é…ç½®JSXæ”¯æŒï¼Œæ‰€æœ‰JSXæ–‡ä»¶ä½¿ç”¨.tsxæ‰©å±•å
5. **å…¼å®¹æ€§ä¿®å¤**ï¼šåœ¨UMI 4.xä¸­ï¼Œrequestå’Œhistoryéœ€è¦é€šè¿‡æ’ä»¶å¯ç”¨æˆ–ä½¿ç”¨æ ‡å‡†åº“æ›¿ä»£å®ç°

### 4.4 UMIé…ç½®

åˆ›å»º `frontend/.umirc.ts` æ–‡ä»¶ï¼š

```typescript
import { defineConfig } from '@umijs/max';

export default defineConfig({
  // ç¦ç”¨MFSUä»¥é¿å…ç¼–è¯‘é—®é¢˜
  mfsu: false,
  
  // è·¯ç”±é…ç½®
  routes: [
    {
      path: '/',
      redirect: '/dashboard',
    },
    {
      name: 'ä»ªè¡¨ç›˜',
      path: '/dashboard',
      component: './Dashboard',
    },
  ],
  
  // å¯ç”¨çš„æ’ä»¶
  plugins: [
    '@umijs/plugins/dist/antd',
    '@umijs/plugins/dist/model',
    '@umijs/plugins/dist/access',
    '@umijs/plugins/dist/request',
  ],
  
  // Ant Designé…ç½®
  antd: {},
  
  // çŠ¶æ€ç®¡ç†é…ç½®
  model: {},
  
  // æƒé™æ§åˆ¶é…ç½®
  access: {},
  
  // è¯·æ±‚é…ç½®
  request: {},
  
  // å¼€å‘ä»£ç†é…ç½®
  proxy: {
    '/api': {
      target: 'http://localhost:7001',
      changeOrigin: true,
      pathRewrite: { '^/api': '/api' }
    }
  },
  
  // ç¯å¢ƒå˜é‡å®šä¹‰
  define: {
    'process.env.API_BASE_URL': JSON.stringify(
      process.env.NODE_ENV === 'production'
        ? 'https://api.example.com'
        : 'http://localhost:7001'
    )
  },
  
  // npmå®¢æˆ·ç«¯é…ç½®
  npmClient: 'pnpm',
});
```

### 4.5 TypeScripté…ç½®

åˆ›å»º `frontend/tsconfig.json` æ–‡ä»¶ï¼š

```json
{
  "compilerOptions": {
    "target": "es2020",
    "module": "esnext",
    "moduleResolution": "node",
    "importHelpers": true,
    "jsx": "react-jsx",
    "esModuleInterop": true,
    "sourceMap": true,
    "baseUrl": "./",
    "strict": true,
    "paths": {
      "@/*": ["src/*"],
      "@@/*": ["src/.umi/*"]
    },
    "allowSyntheticDefaultImports": true,
    "skipLibCheck": true,
    "resolveJsonModule": true,
    "ignoreDeprecations": "6.0"
  },
  "include": [
    "src/**/*",
    "typings.d.ts"
  ]
}
```

### 4.6 ESLinté…ç½®

åˆ›å»º `frontend/eslint.config.js` æ–‡ä»¶ï¼š

```javascript
export default [
  {
    files: ['**/*.{js,mjs,cjs,ts,jsx,tsx}'],
    languageOptions: {
      ecmaVersion: 2020,
      sourceType: 'module',
      parserOptions: {
        ecmaFeatures: {
          jsx: true,
        },
      },
    },
    rules: {
      'no-console': 'warn',
      'prefer-const': 'error',
      'no-var': 'error',
    },
  },
  {
    files: ['**/*.{ts,tsx}'],
    languageOptions: {
      parser: '@typescript-eslint/parser',
    },
    plugins: {
      '@typescript-eslint': '@typescript-eslint/eslint-plugin',
    },
    rules: {
      '@typescript-eslint/no-unused-vars': [
        'error',
        { argsIgnorePattern: '^_' },
      ],
      '@typescript-eslint/no-explicit-any': 'error',
    },
  },
  {
    files: ['**/*.{js,jsx,ts,tsx}'],
    plugins: {
      react: 'eslint-plugin-react',
      'react-hooks': 'eslint-plugin-react-hooks',
    },
    settings: {
      react: {
        version: 'detect',
      },
    },
    rules: {
      'react/react-in-jsx-scope': 'off',
      'react/prop-types': 'off',
    },
  },
  {
    files: ['**/*.{js,jsx,ts,tsx}'],
    plugins: {
      prettier: 'eslint-plugin-prettier',
    },
    rules: {
      'prettier/prettier': 'error',
    },
  },
];
```

### 4.7 Prettieré…ç½®

åˆ›å»º `frontend/.prettierrc.json` æ–‡ä»¶ï¼š

```json
{
  "printWidth": 80,
  "tabWidth": 2,
  "useTabs": false,
  "semi": true,
  "singleQuote": true,
  "quoteProps": "as-needed",
  "jsxSingleQuote": false,
  "trailingComma": "es5",
  "bracketSpacing": true,
  "bracketSameLine": false,
  "arrowParens": "avoid",
  "requirePragma": false,
  "insertPragma": false,
  "proseWrap": "preserve",
  "htmlWhitespaceSensitivity": "css",
  "endOfLine": "lf"
}
```

### 6.3.4 åç«¯Egg.jsé…ç½®

#### 6.3.4.1 æ’ä»¶é…ç½®

åˆ›å»º `backend/config/plugin.js` æ–‡ä»¶ï¼š

```javascript
module.exports = {
  sequelize: { enable: true, package: 'egg-sequelize' },
  validate: { enable: true, package: 'egg-validate' },
  cors: { enable: true, package: 'egg-cors' },
  jwt: { enable: true, package: 'egg-jwt' },
};
```

#### 6.3.4.2 åŸºç¡€é…ç½®

åˆ›å»º `backend/config/config.default.js` æ–‡ä»¶ï¼š

```javascript
module.exports = appInfo => {
  const config = exports = {};
  
  // Cookieç­¾åå¯†é’¥
  config.keys = appInfo.name + '_1693920000000_UG_SECRET_KEY';
  
  // å…¨å±€ä¸­é—´ä»¶é“¾
  config.middleware = ['errorHandler', 'jwtAuth'];
  
  // æœåŠ¡ç«¯å£é…ç½®
  config.cluster = {
    listen: {
      port: 15001,
      hostname: 'localhost',
    },
  };
  
  // å®‰å…¨é…ç½®
  config.security = {
    csrf: { enable: false },
    domainWhiteList: ['http://localhost:15000', 'http://127.0.0.1:15000']
  };
  
  // CORSé…ç½®
  config.cors = {
    origin: ['http://localhost:15000', 'http://127.0.0.1:15000'],
    allowMethods: 'GET,HEAD,PUT,POST,DELETE,PATCH',
    credentials: true
  };
  
  // JWTè®¤è¯é…ç½®
  config.jwt = {
    secret: 'UG_JWT_SECRET_KEY_2023',
    expiresIn: '24h'
  };
  
  config.jwtAuth = {
    ignore: [
      '/api/auth/login',
      '/api/auth/register',
      '/api/auth/refresh',
      '/api/health'
    ]
  };
  
  // æ•°æ®åº“é…ç½®
  config.sequelize = {
    dialect: 'mysql',
    host: 'localhost',
    port: 3306,
    database: 'ug',
    username: 'ug',
    password: 'zcn231101',
    timezone: '+08:00',
    define: {
      freezeTableName: true,
      underscored: true,
      timestamps: true,
      createdAt: 'created_at',
      updatedAt: 'updated_at',
      deletedAt: 'deleted_at',
      paranoid: true
    },
    dialectOptions: {
      charset: 'utf8mb4',
      supportBigNumbers: true,
      bigNumberStrings: true,
    }
  };
  
  // è‡ªå®šä¹‰é…ç½®
  config.userConfig = {
    pagination: { defaultPageSize: 20, maxPageSize: 100 },
    bcrypt: { saltRounds: 10 },
    upload: { maxFileSize: '10mb' }
  };
  
  return config;
};
```

#### 6.3.4.3 åç«¯TypeScripté…ç½®

åˆ›å»º `backend/tsconfig.json` æ–‡ä»¶ï¼š

```json
{
  "extends": "../config/tsconfig/backend.json",
  "include": ["**/*.ts", "**/*.js", "../typings.d.ts"]
}
```

#### 6.3.4.4 åç«¯å…¥å£æ–‡ä»¶

åˆ›å»º `backend/app.js` æ–‡ä»¶ï¼š

```javascript
module.exports = app => {
  app.beforeStart(async () => {
    console.log('ğŸš€ UG Backend Server is starting...');
    console.log('âœ… UG Backend Server started successfully!');
  });
};
```

#### 6.3.4.5 è·¯ç”±é…ç½®

åˆ›å»º `backend/app/router.js` æ–‡ä»¶ï¼š

```javascript
module.exports = app => {
  const { router, controller } = app;

  // è®¤è¯ç›¸å…³
  router.post('/api/auth/login', controller.auth.login);
  router.post('/api/auth/register', controller.auth.register);
  router.post('/api/auth/refresh', controller.auth.refresh);
  router.post('/api/auth/logout', controller.auth.logout);

  // ç”¨æˆ·ç®¡ç†
  router.get('/api/users', controller.user.index);
  router.get('/api/users/:id', controller.user.show);
  router.post('/api/users', controller.user.create);
  router.put('/api/users/:id', controller.user.update);
  router.delete('/api/users/:id', controller.user.destroy);

  // è§’è‰²ä¸æƒé™
  router.get('/api/roles', controller.role.index);
  router.get('/api/permissions', controller.permission.index);
};
```

åˆ›å»º `frontend/.prettierrc.json` æ–‡ä»¶ï¼š

```json
{
  "printWidth": 80,
  "tabWidth": 2,
  "useTabs": false,
  "semi": true,
  "singleQuote": true,
  "quoteProps": "as-needed",
  "jsxSingleQuote": false,
  "trailingComma": "es5",
  "bracketSpacing": true,
  "bracketSameLine": false,
  "arrowParens": "avoid",
  "requirePragma": false,
  "insertPragma": false,
  "proseWrap": "preserve",
  "htmlWhitespaceSensitivity": "css",
  "endOfLine": "lf"
}
```

## 7. ä»£ç è§„èŒƒå’Œå˜é‡è§„èŒƒ

### 7.1 ä»£ç è§„èŒƒ

1. **æ–‡ä»¶å‘½åè§„èŒƒ**:
   - ç»„ä»¶æ–‡ä»¶ä½¿ç”¨PascalCaseå‘½åï¼Œå¦‚`UserProfile.tsx`
   - å·¥å…·æ–‡ä»¶ä½¿ç”¨camelCaseå‘½åï¼Œå¦‚`formatDate.ts`

2. **ç»„ä»¶è§„èŒƒ**:
   - ä¼˜å…ˆä½¿ç”¨å‡½æ•°ç»„ä»¶å’ŒHooks
   - ç»„ä»¶æ–‡ä»¶åº”åŒ…å«ç±»å‹å®šä¹‰
   - ä½¿ç”¨TypeScriptè¿›è¡Œç±»å‹æ£€æŸ¥

3. **æ ·å¼è§„èŒƒ**:
   - ä½¿ç”¨CSS Modulesæˆ–styled-components
   - é¿å…ä½¿ç”¨å†…è”æ ·å¼

4. **UMI 4.xç‰¹å®šè§„èŒƒ**:
   - éµå¾ªUMI 4.xçš„useModelæ–°è§„èŒƒ
   - ä½¿ç”¨çº¦å®šå¼è·¯ç”±é…ç½®
   - éµå¾ªé¡¹ç›®ç›®å½•ç»“æ„è§„èŒƒ

### 7.2 å˜é‡å‘½åè§„èŒƒ

1. **å˜é‡å‘½å**:
   - ä½¿ç”¨camelCaseï¼Œå¦‚`userInfo`
   - å¸¸é‡ä½¿ç”¨UPPER_CASEï¼Œå¦‚`MAX_RETRY_COUNT`
   - å¸ƒå°”å€¼å˜é‡ä½¿ç”¨isã€hasã€canç­‰å‰ç¼€ï¼Œå¦‚`isLoading`

2. **å‡½æ•°å‘½å**:
   - ä½¿ç”¨åŠ¨è¯å¼€å¤´ï¼Œå¦‚`getUserInfo()`
   - äº‹ä»¶å¤„ç†å‡½æ•°ä½¿ç”¨handleå‰ç¼€ï¼Œå¦‚`handleClick`

3. **ç±»å‹å’Œæ¥å£**:
   - æ¥å£ä½¿ç”¨Iå‰ç¼€ï¼Œå¦‚`IUser`
   - ç±»å‹åˆ«åä½¿ç”¨Tå‰ç¼€ï¼Œå¦‚`TUserStatus`

### 7.3 æ¥å£è§„èŒƒ

1. **APIæ¥å£è®¾è®¡**:
   - ä½¿ç”¨RESTfulé£æ ¼
   - ç»Ÿä¸€è¿”å›æ ¼å¼
   - é”™è¯¯å¤„ç†æœºåˆ¶

2. **è¯·æ±‚å°è£…**:
   - ä½¿ç”¨umi-requestæˆ–axiosè¿›è¡Œå°è£…
   - ç»Ÿä¸€æ‹¦æˆªå™¨å¤„ç†

### 7.4 UMI 4.xæ¥å£è§„èŒƒ

1. **è·¯ç”±æ¥å£è§„èŒƒ**:
   - ä½¿ç”¨çº¦å®šå¼è·¯ç”±é…ç½®
   - é¡µé¢ç»„ä»¶æ”¾ç½®åœ¨src/pagesç›®å½•ä¸‹
   - ç»„ä»¶æ–‡ä»¶ä½¿ç”¨.tsxæ‰©å±•å

2. **çŠ¶æ€ç®¡ç†æ¥å£è§„èŒƒ**:
   - ä½¿ç”¨UMI Modelè¿›è¡ŒçŠ¶æ€ç®¡ç†
   - æ¨¡å‹æ–‡ä»¶æ”¾ç½®åœ¨src/modelsç›®å½•ä¸‹
   - éµå¾ªuseModelæ–°è§„èŒƒ

3. **æœåŠ¡æ¥å£è§„èŒƒ**:
   - APIæœåŠ¡å°è£…æ”¾ç½®åœ¨src/servicesç›®å½•ä¸‹
   - ä½¿ç”¨UMI Requestæˆ–axiosè¿›è¡ŒHTTPè¯·æ±‚
   - ç»Ÿä¸€é”™è¯¯å¤„ç†æœºåˆ¶

## 8. æ„å»ºå’Œè¿è¡Œ

### 8.1 å¼€å‘ç¯å¢ƒè¿è¡Œ

```bash
# è¿›å…¥å‰ç«¯ç›®å½•
cd frontend

# å®‰è£…ä¾èµ–
pnpm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev
```

### 8.2 ç”Ÿäº§ç¯å¢ƒæ„å»º

```bash
# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm build
```

### 8.3 ä»£ç æ£€æŸ¥å’Œæ ¼å¼åŒ–

```bash
# ä»£ç æ£€æŸ¥
pnpm lint

# ä»£ç æ£€æŸ¥å¹¶è‡ªåŠ¨ä¿®å¤
pnpm lint:fix

# ä»£ç æ ¼å¼åŒ–
pnpm format
```

### 8.4 UMI 4.xç‰¹å®šæ„å»ºé…ç½®

1. **MFSUé…ç½®**:
   - ç¡®ä¿åœ¨.umirc.tsä¸­ç¦ç”¨MFSUä»¥é¿å…ç¼–è¯‘é—®é¢˜
   - å¦‚é‡åˆ°æ„å»ºæ€§èƒ½é—®é¢˜ï¼Œå¯è€ƒè™‘å¯ç”¨å¹¶è§£å†³ç›¸å…³å…¼å®¹æ€§é—®é¢˜

2. **TypeScripté…ç½®**:
   - ç¡®ä¿tsconfig.jsonä¸­è®¾ç½®ignoreDeprecationsä»¥é¿å…å¼ƒç”¨è­¦å‘Š
   - ç¡®ä¿æ­£ç¡®é…ç½®JSXæ”¯æŒ

3. **UMIæ’ä»¶é…ç½®**:
   - ç¡®ä¿å¯ç”¨å¿…è¦çš„UMIæ’ä»¶ï¼ˆantdã€modelã€accessã€requestç­‰ï¼‰
   - æ£€æŸ¥æ’ä»¶ç‰ˆæœ¬ä¸UMIç‰ˆæœ¬çš„å…¼å®¹æ€§

### 8.5 å‰åç«¯é€šä¿¡é…ç½®

#### 8.5.1 å‰ç«¯ä»£ç†é…ç½®

åœ¨å¼€å‘ç¯å¢ƒä¸­ï¼Œå‰ç«¯é€šè¿‡`.umirc.ts`ä¸­çš„proxyé…ç½®å°†APIè¯·æ±‚ä»£ç†åˆ°åç«¯æœåŠ¡ï¼š

```typescript
proxy: {
  '/api': {
    target: 'http://localhost:15001',
    changeOrigin: true,
    pathRewrite: { '^/api': '/api' }
  }
}
```

#### 8.5.2 åç«¯CORSé…ç½®

åç«¯é€šè¿‡CORSé…ç½®å…è®¸å‰ç«¯åŸŸåè·¨åŸŸè®¿é—®ï¼š

```javascript
config.cors = {
  origin: ['http://localhost:15000', 'http://127.0.0.1:15000'],
  allowMethods: 'GET,HEAD,PUT,POST,DELETE,PATCH',
  credentials: true
};
```

#### 8.5.3 ç¯å¢ƒå˜é‡é…ç½®

å‰ç«¯é€šè¿‡ç¯å¢ƒå˜é‡ç®¡ç†APIåŸºç¡€URLï¼š

```typescript
define: {
  'process.env.API_BASE_URL': JSON.stringify(
    process.env.NODE_ENV === 'production'
      ? 'https://api.example.com'
      : 'http://localhost:15001'
  ),
}
```

### 8.6 é¡¹ç›®å¯åŠ¨æµç¨‹

#### 8.6.1 å¼€å‘ç¯å¢ƒå¯åŠ¨

1. å¯åŠ¨æ•°æ®åº“æœåŠ¡ï¼š
   ```bash
   # å¦‚æœä½¿ç”¨Docker
   docker-compose up -d mysql
   ```

2. å¯åŠ¨åç«¯æœåŠ¡ï¼š
   ```bash
   # è¿›å…¥åç«¯ç›®å½•
   cd backend
   
   # å®‰è£…ä¾èµ–
   pnpm install
   
   # è¿è¡Œæ•°æ®åº“è¿ç§»
   pnpm migrate:up
   
   # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
   pnpm dev
   ```

3. å¯åŠ¨å‰ç«¯æœåŠ¡ï¼š
   ```bash
   # è¿›å…¥å‰ç«¯ç›®å½•
   cd frontend
   
   # å®‰è£…ä¾èµ–
   pnpm install
   
   # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
   pnpm dev
   ```

#### 8.6.2 ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

1. æ„å»ºå‰ç«¯é¡¹ç›®ï¼š
   ```bash
   # è¿›å…¥å‰ç«¯ç›®å½•
   cd frontend
   
   # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
   pnpm build
   ```

2. å¯åŠ¨åç«¯æœåŠ¡ï¼š
   ```bash
   # è¿›å…¥åç«¯ç›®å½•
   cd backend
   
   # å®‰è£…ç”Ÿäº§ä¾èµ–
   pnpm install --prod
   
   # å¯åŠ¨æœåŠ¡
   pnpm start
   ```

## 9. éªŒè¯é…ç½®

### 9.1 ç¯å¢ƒéªŒè¯

1. éªŒè¯Node.jsç‰ˆæœ¬:
   ```bash
   node --version
   # åº”è¯¥è¾“å‡º v20.19.0
   ```

2. éªŒè¯pnpmç‰ˆæœ¬:
   ```bash
   pnpm --version
   # åº”è¯¥è¾“å‡º 8.15.8
   ```

### 9.2 é…ç½®æ–‡ä»¶éªŒè¯

1. æ£€æŸ¥`.umirc.ts`é…ç½®æ˜¯å¦æ­£ç¡®
2. æ£€æŸ¥`tsconfig.json`é…ç½®æ˜¯å¦æ­£ç¡®
3. æ£€æŸ¥ESLintå’ŒPrettieré…ç½®æ˜¯å¦æ­£ç¡®
4. æ£€æŸ¥åç«¯`config.default.js`é…ç½®æ˜¯å¦æ­£ç¡®
5. æ£€æŸ¥åç«¯`plugin.js`é…ç½®æ˜¯å¦æ­£ç¡®

### 9.3 åŠŸèƒ½éªŒè¯

1. å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼Œæ£€æŸ¥æ˜¯å¦èƒ½æ­£å¸¸è®¿é—®
2. åˆ›å»ºä¸€ä¸ªç®€å•çš„ç»„ä»¶ï¼Œæ£€æŸ¥TypeScriptç±»å‹æ£€æŸ¥æ˜¯å¦æ­£å¸¸å·¥ä½œ
3. è¿è¡Œä»£ç æ£€æŸ¥ï¼Œæ£€æŸ¥ESLintå’ŒPrettieræ˜¯å¦æ­£å¸¸å·¥ä½œ
4. æ‰§è¡Œæ„å»ºå‘½ä»¤ï¼Œæ£€æŸ¥ç”Ÿäº§æ„å»ºæ˜¯å¦æ­£å¸¸å·¥ä½œ
5. æµ‹è¯•å‰åç«¯é€šä¿¡ï¼ŒéªŒè¯APIæ¥å£æ˜¯å¦æ­£å¸¸å·¥ä½œ

### 9.4 UMI 4.xç‰¹å®šéªŒè¯

1. **è·¯ç”±éªŒè¯**:
   - éªŒè¯çº¦å®šå¼è·¯ç”±æ˜¯å¦æ­£å¸¸å·¥ä½œ
   - æ£€æŸ¥é¡µé¢ç»„ä»¶æ˜¯å¦æ­£ç¡®åŠ è½½

2. **çŠ¶æ€ç®¡ç†éªŒè¯**:
   - éªŒè¯useModelæ˜¯å¦æ­£å¸¸å·¥ä½œ
   - æ£€æŸ¥çŠ¶æ€æ›´æ–°å’Œç»„ä»¶é‡æ¸²æŸ“

3. **æ’ä»¶éªŒè¯**:
   - éªŒè¯Ant Designç»„ä»¶æ˜¯å¦æ­£å¸¸åŠ è½½
   - æ£€æŸ¥UMIæ’ä»¶åŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½œ

### 9.5 æ•°æ®åº“é…ç½®éªŒè¯

1. éªŒè¯æ•°æ®åº“è¿æ¥ï¼š
   ```bash
   # åœ¨åç«¯ç›®å½•ä¸­è¿è¡Œ
   pnpm sequelize-cli db:migrate:status
   ```

2. æ£€æŸ¥æ•°æ®åº“è¡¨ç»“æ„æ˜¯å¦æ­£ç¡®åˆ›å»º
3. éªŒè¯Sequelizeæ¨¡å‹æ˜¯å¦èƒ½æ­£å¸¸è®¿é—®æ•°æ®åº“

### 9.6 æ•°æ®åº“é…ç½®æ³¨æ„äº‹é¡¹

1. **MySQL 8.0å…¼å®¹æ€§**ï¼š
   - ç¡®ä¿ä½¿ç”¨MySQL 8.0æˆ–æ›´é«˜ç‰ˆæœ¬
   - é…ç½®`--default-authentication-plugin=mysql_native_password`ä»¥ç¡®ä¿ä¸sequelizeçš„å…¼å®¹æ€§

2. **å­—ç¬¦é›†é…ç½®**ï¼š
   - ä½¿ç”¨`utf8mb4`å­—ç¬¦é›†ä»¥æ”¯æŒå®Œæ•´çš„Unicodeå­—ç¬¦ï¼ŒåŒ…æ‹¬emoji
   - ç¡®ä¿æ•°æ®åº“ã€è¡¨å’Œåˆ—éƒ½ä½¿ç”¨ç›¸åŒçš„å­—ç¬¦é›†

3. **æ—¶åŒºè®¾ç½®**ï¼š
   - é…ç½®æ­£ç¡®çš„æ—¶åŒºï¼ˆ+08:00ï¼‰ä»¥ç¡®ä¿æ—¶é—´æˆ³çš„ä¸€è‡´æ€§
   - åœ¨æ•°æ®åº“è¿æ¥é…ç½®ä¸­æ˜ç¡®æŒ‡å®šæ—¶åŒº

4. **è¿æ¥æ± é…ç½®**ï¼š
   - ç”Ÿäº§ç¯å¢ƒåº”é…ç½®åˆé€‚çš„è¿æ¥æ± å‚æ•°ä»¥ä¼˜åŒ–æ€§èƒ½
   - è®¾ç½®æœ€å¤§è¿æ¥æ•°ã€æœ€å°è¿æ¥æ•°å’Œè¶…æ—¶å‚æ•°

5. **å®‰å…¨é…ç½®**ï¼š
   - ä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç æ•°æ®åº“å¯†ç 
   - ç”Ÿäº§ç¯å¢ƒåº”é€šè¿‡ç¯å¢ƒå˜é‡æä¾›æ•æ„Ÿä¿¡æ¯
   - ä½¿ç”¨æœ€å°æƒé™åŸåˆ™åˆ›å»ºæ•°æ®åº“ç”¨æˆ·

### 9.7 ç›®å½•ç»“æ„éªŒè¯

### 9.8 TypeScripté…ç½®æ³¨æ„äº‹é¡¹

1. **ç‰ˆæœ¬å…¼å®¹æ€§**ï¼š
   - ç¡®ä¿ä½¿ç”¨TypeScript 5.9.2ç‰ˆæœ¬ï¼Œä¸é¡¹ç›®è¦æ±‚ä¿æŒä¸€è‡´
   - é¿å…ä½¿ç”¨è¿‡æ—§æˆ–è¿‡æ–°çš„TypeScriptç‰ˆæœ¬ï¼Œå¯èƒ½å¯¼è‡´å…¼å®¹æ€§é—®é¢˜

2. **å¼ƒç”¨è­¦å‘Šå¤„ç†**ï¼š
   - åœ¨`tsconfig.json`ä¸­è®¾ç½®`"ignoreDeprecations": "5.0"`ä»¥å¿½ç•¥ç‰¹å®šç‰ˆæœ¬çš„å¼ƒç”¨è­¦å‘Š
   - å®šæœŸæ£€æŸ¥å¹¶æ›´æ–°TypeScriptç‰ˆæœ¬åŠé…ç½®ä»¥ä¿æŒæœ€ä½³å®è·µ

3. **ä¸¥æ ¼æ¨¡å¼é…ç½®**ï¼š
   - å¯ç”¨`strictNullChecks`ã€`noImplicitAny`ç­‰ä¸¥æ ¼ç±»å‹æ£€æŸ¥é€‰é¡¹
   - ç¡®ä¿ç±»å‹å®‰å…¨ï¼Œå‡å°‘è¿è¡Œæ—¶é”™è¯¯

4. **æ¨¡å—è§£æé…ç½®**ï¼š
   - ä½¿ç”¨æ­£ç¡®çš„`moduleResolution`é…ç½®ï¼ˆå¦‚`node16`ï¼‰
   - ç¡®ä¿æ¨¡å—è·¯å¾„è§£ææ­£ç¡®ï¼Œé¿å…å¯¼å…¥é”™è¯¯

5. **ç±»å‹å®šä¹‰è·¯å¾„**ï¼š
   - æ­£ç¡®é…ç½®`typeRoots`ä»¥ç¡®ä¿ç±»å‹å®šä¹‰æ–‡ä»¶çš„æ­£ç¡®è§£æ
   - é¿å…ç±»å‹è§£ææ··ä¹±å¯¼è‡´çš„ç¼–è¯‘é”™è¯¯

ç¡®ä¿é¡¹ç›®ç›®å½•ç»“æ„ç¬¦åˆä»¥ä¸‹è§„èŒƒï¼š

```
ug-project/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ controller/
â”‚   â”‚   â”œâ”€â”€ service/
â”‚   â”‚   â”œâ”€â”€ model/
â”‚   â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â””â”€â”€ router.js
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ config.default.js
â”‚   â”‚   â”œâ”€â”€ plugin.js
â”‚   â”‚   â””â”€â”€ config.local.js
â”‚   â”œâ”€â”€ database/
â”‚   â”‚   â”œâ”€â”€ migrations/
â”‚   â”‚   â””â”€â”€ seeders/
â”‚   â”œâ”€â”€ app.js
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â””â”€â”€ typings.d.ts
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ styles/
â”‚   â”‚   â””â”€â”€ assets/
â”‚   â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ .umirc.ts
â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â”œâ”€â”€ eslint.config.js
â”‚   â””â”€â”€ .prettierrc.json
â”œâ”€â”€ scripts/
â”œâ”€â”€ tools/
â”œâ”€â”€ monitoring/
â”œâ”€â”€ .vscode/
â”‚   â””â”€â”€ settings.json
â””â”€â”€ package.json
```

1. éªŒè¯Node.jsç‰ˆæœ¬:
   ```bash
   node --version
   # åº”è¯¥è¾“å‡º v20.19.0
   ```

2. éªŒè¯pnpmç‰ˆæœ¬:
   ```bash
   pnpm --version
   # åº”è¯¥è¾“å‡º 8.15.8
   ```



## 10. å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### 10.1 æ„å»ºé—®é¢˜

1. **MFSUç¼–è¯‘é—®é¢˜**:
   - è§£å†³æ–¹æ¡ˆï¼šåœ¨`.umirc.ts`ä¸­ç¦ç”¨MFSU
   
2. **TypeScriptå¼ƒç”¨è­¦å‘Š**:
   - è§£å†³æ–¹æ¡ˆï¼šåœ¨`tsconfig.json`ä¸­è®¾ç½®`ignoreDeprecations`

3. **UMI 4.xå…¼å®¹æ€§é—®é¢˜**:
   - è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨axiosæ›¿ä»£UMIçš„requestï¼Œä½¿ç”¨historyåº“æ›¿ä»£UMIçš„historyå®ç°

4. **Egg.jsçƒ­æ›´æ–°é—®é¢˜**:
   - è§£å†³æ–¹æ¡ˆï¼šç¡®ä¿æ­£ç¡®é…ç½®`egg-ts-helper`å’Œ`egg-bin`å¼€å‘å·¥å…·

### 10.2 ä¾èµ–é—®é¢˜

1. **ç‰ˆæœ¬å†²çª**:
   - è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨`resolutions`æˆ–`overrides`è§£å†³ç‰ˆæœ¬å†²çª

2. **ç¼ºå¤±ä¾èµ–**:
   - è§£å†³æ–¹æ¡ˆï¼šè¿è¡Œ`pnpm install`å®‰è£…ç¼ºå¤±çš„ä¾èµ–

### 10.3 é…ç½®é—®é¢˜

1. **ESLinté…ç½®é—®é¢˜**:
   - è§£å†³æ–¹æ¡ˆï¼šç¡®ä¿ä½¿ç”¨ESLint 8.xçš„æ‰å¹³åŒ–é…ç½®æ ¼å¼

2. **VS Codeé…ç½®é—®é¢˜**:
   - è§£å†³æ–¹æ¡ˆï¼šè¿è¡Œ`fix-editor-consistency.bat`è„šæœ¬ä¿®å¤é…ç½®

3. **UMI 4.xé…ç½®é—®é¢˜**:
   - è§£å†³æ–¹æ¡ˆï¼šæ£€æŸ¥å¹¶æ›´æ–°.umirc.tsé…ç½®æ–‡ä»¶ï¼Œç¡®ä¿ç¬¦åˆUMI 4.xè§„èŒƒ

4. **Egg.jsé…ç½®é—®é¢˜**:
   - è§£å†³æ–¹æ¡ˆï¼šæ£€æŸ¥config.default.jså’Œplugin.jsé…ç½®æ–‡ä»¶ï¼Œç¡®ä¿æ’ä»¶æ­£ç¡®å¯ç”¨
   - ç¡®ä¿æ•°æ®åº“è¿æ¥é…ç½®æ­£ç¡®
   - éªŒè¯JWTå’ŒCORSé…ç½®æ˜¯å¦ç¬¦åˆå®‰å…¨è¦æ±‚