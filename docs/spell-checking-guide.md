# 拼写错误检测和修正方法指南

## 1. 概述

本文档记录了在 UG 项目中进行拼写错误检测和修正的正确方法，包括工具使用、问题识别、修复步骤和最佳实践。

## 2. 工具配置

### 2.1 cspell 配置

项目使用 cspell 作为拼写检查工具，配置文件位于：

- 根目录: `cspell.json`
- 前端: `frontend/cspell.json`
- 后端: `backend/cspell.json`
- 配置继承: `config/cspell/`

### 2.2 配置文件结构

```json
{
  "version": "0.2",
  "language": "en",
  "words": [
    // 技术术语和项目特定词汇
  ],
  "ignorePaths": [
    // 忽略检查的路径
  ],
  "import": [
    // 继承的配置文件路径
  ]
}
```

## 3. 拼写错误检测方法

### 3.1 前端项目检测

```bash
# 在 frontend 目录下执行
pnpm spellcheck
```

### 3.2 后端项目检测

```bash
# 在 backend 目录下执行
pnpm spellcheck
```

### 3.3 全项目检测

在 package.json 中添加脚本：

```json
{
  "scripts": {
    "spellcheck": "cspell \"**/*.{js,ts,jsx,tsx,json,md}\""
  }
}
```

## 4. 常见问题和解决方案

### 4.1 "Siderbar" 被误报为拼写错误

**问题描述**:
在前端项目的 `src/app.ts` 文件中，Ant Design Pro 的配置项 `fixSiderbar` 被 cspell 误认为包含拼写错误的单词 "Siderbar"。

**解决方案**:
将 "Siderbar" 添加到前端的 cspell 单词列表中：

```json
{
  "words": ["Siderbar"]
}
```

### 4.2 npm 自动生成字段被误报

**问题描述**:
npm 或其他工具自动生成的字段（如 `__npminstall_done`）被 cspell 误报为拼写错误。

**解决方案**:
将这些合法但被误报的词汇添加到相应的 cspell 配置文件的 `words` 数组中：

```json
{
  "words": ["npminstall"]
}
```

### 4.3 cspell 命令未找到

**问题描述**:
在 pnpm 工作区项目中，直接运行 `npx cspell` 或 `pnpm exec cspell` 可能会报错 "命令未找到"。

**解决方案**:
使用完整的模块路径执行 cspell：

```bash
node ../node_modules/.pnpm/cspell@版本号/node_modules/cspell/bin.mjs lint 文件路径
```

## 5. 修正流程

### 5.1 识别拼写错误

1. 运行拼写检查命令
2. 查看输出结果，识别被标记为未知的单词
3. 确定单词是否为合法的技术术语或项目特定词汇

### 5.2 修正策略

#### 策略一：添加到词汇表

对于合法但被误报的词汇，将其添加到相应的 cspell 配置文件的 `words` 数组中。

#### 策略二：修正拼写错误

对于真正的拼写错误，直接修正源代码中的错误拼写。

#### 策略三：使用继承配置

使用 `import` 属性替代 `extends` 属性进行配置继承，以提高兼容性。

### 5.3 验证修正结果

1. 重新运行拼写检查命令
2. 确认之前报告的错误已消失
3. 确保没有引入新的问题

## 6. 最佳实践

### 6.1 词汇管理

1. **及时更新**: 当引入新的技术术语、库名称、框架特定词汇时，应及时更新 cspell 配置文件
2. **统一管理**: 在所有相关的 cspell.json 文件中统一添加词汇
3. **分类组织**: 将词汇按类型分组，便于维护

### 6.2 配置继承

1. **使用 import**: 优先使用 `import` 属性而非 `extends` 属性
2. **模块化配置**: 将通用配置放在基础配置文件中，通过继承方式复用

### 6.3 自动化检查

1. **CI/CD 集成**: 将拼写检查集成到持续集成流程中
2. **开发流程**: 在代码提交前自动运行拼写检查
3. **定期检查**: 定期对整个项目进行拼写检查

## 7. 注意事项

1. **环境差异**: 注意不同操作系统和终端环境下命令执行的差异
2. **工具版本**: 确保团队成员使用相同版本的拼写检查工具
3. **忽略规则**: 合理配置 ignorePaths，避免检查不必要的文件
4. **性能考虑**: 对于大型项目，可以针对特定目录进行检查，提高效率
5. **自动生成内容**: 注意识别和处理工具自动生成的内容，避免误报
