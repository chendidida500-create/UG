# 数据库配置更新日志

## 更新时间

2025-09-07

## 更新内容

为了确保开发、测试和生产环境的一致性，项目已统一数据库配置：

### 配置变更详情

1. **统一数据库名**：
   - 开发环境：从可能的其他名称统一为 `ug`
   - 测试环境：从可能的其他名称统一为 `ug`
   - 生产环境：从可能的其他名称统一为 `ug` 或通过环境变量 `DB_DATABASE` 设置

2. **统一用户名**：
   - 开发环境：从可能的其他名称统一为 `ug`
   - 测试环境：从可能的其他名称统一为 `ug`
   - 生产环境：从可能的其他名称统一为 `ug` 或通过环境变量 `DB_USERNAME` 设置

3. **保持密码一致**：
   - 所有环境密码保持为：`zcn231101`

4. **统一连接参数**：
   - 主机：`localhost`
   - 端口：`3306`
   - 类型：`mysql`
   - 时区：`+08:00`

### 涉及文件

1. `backend/database/config.js` - Sequelize CLI 配置文件
2. `backend/config/config.default.js` - Egg.js 默认配置文件

### 环境变量支持

生产环境支持通过以下环境变量覆盖配置：

- `DB_USERNAME` - 数据库用户名
- `DB_PASSWORD` - 数据库密码
- `DB_DATABASE` - 数据库名
- `DB_HOST` - 数据库主机
- `DB_PORT` - 数据库端口

### 验证方式

通过以下方式验证配置是否正确统一：

1. 运行 `scripts/check-database-config.bat` 脚本
2. 运行 `scripts/verify-db-config.js` 脚本
3. 检查相关配置文件内容

### 影响范围

此次配置统一解决了以下问题：

1. 不同环境数据库名不一致导致的连接问题
2. 不同环境用户名不一致导致的权限问题
3. 提高了开发、测试、生产环境的一致性
4. 简化了部署和维护流程

## 验证结果

所有数据库配置均已正确统一：

- 数据库名：ug
- 用户名：ug
- 密码：zcn231101